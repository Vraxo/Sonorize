@using System.Text.Json
@using Microsoft.JSInterop
@inject IJSRuntime JS

@if (IsVisible)
{
    <div class="modal-backdrop" @onclick="Cancel">
        <div class="modal-container" @onclick:stopPropagation>
            <div class="modal-header">Import Theme</div>
            <div class="modal-body">
                <p style="margin-bottom:10px;">Paste the theme JSON below:</p>
                <textarea @bind="_themeJson"
                          class="form-control theme-textarea"
                          placeholder='{"accentColor": "#1DB954", "bgPrimary": "#000000", ...}'></textarea>

                @if (_hasError)
                {
                    <p class="error-text">Invalid JSON format.</p>
                }
            </div>
            <div class="modal-footer">
                <button class="btn" @onclick="Cancel">Cancel</button>
                <button class="btn btn-primary" @onclick="Confirm">Import</button>
            </div>
        </div>
    </div>
}