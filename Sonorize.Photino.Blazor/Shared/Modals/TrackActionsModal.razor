@using Sonorize.Core.Models
@using Sonorize.Core
@using Sonorize.Core.Services
@using Sonorize.Core.Services.Library
@using Sonorize.Core.Services.System
@using Sonorize.Photino.Blazor.Shared
@inject LibraryService LibService
@inject FileExplorerService FileExplorer

<Modal IsVisible="IsVisible"
       Title="Track Actions"
       ConfirmText="Close"
       ShowCancelButton="false"
       OnCancel="Cancel"
       OnConfirm="Cancel">

    <div class="track-info-header">
        <i class="fas fa-music"></i>
        <div>
            <strong>@Song?.Title</strong>
            <br />
            <span class="artist-name">@Song?.Artist</span>
        </div>
    </div>

    <div class="actions-container">
        <div class="section-label">Add to Playlist</div>
        <div class="playlist-selection-list">
            @if (!ManualPlaylists.Any())
            {
                <p class="text-muted">No playlists found.</p>
            }
            @foreach (var playlist in ManualPlaylists)
            {
                <button class="playlist-item-btn" @onclick="() => AddTo(playlist)">
                    <i class="fas fa-list-music"></i> @playlist.Name
                </button>
            }
        </div>

        <div class="divider"></div>

        <div class="section-label">Manage</div>

        <button class="action-btn" @onclick="TriggerEdit">
            <i class="fas fa-tag"></i> Edit Metadata
        </button>

        <button class="action-btn" @onclick="OpenInExplorer">
            <i class="fas fa-folder-open"></i> Show in File Explorer
        </button>
    </div>

</Modal>